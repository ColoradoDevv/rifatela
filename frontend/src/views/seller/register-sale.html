<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Registro de ventas para vendedores - Rifatela">
  <meta name="theme-color" content="#0a0a1a">
  <title>Registrar Venta | Rifatela</title>
  <link rel="stylesheet" href="../../css/styles.css">
  <link rel="stylesheet" href="../../css/header.css">
  <link rel="stylesheet" href="../../css/admin.css">
</head>

<body data-allowed-roles="seller,admin">
  <div class="bg-effects" aria-hidden="true"></div>
  <div class="confetti-particle" aria-hidden="true"></div>
  <div class="confetti-particle" aria-hidden="true"></div>
  <div class="confetti-particle" aria-hidden="true"></div>
  <div class="sparkle-star" aria-hidden="true"></div>
  <div class="sparkle-star" aria-hidden="true"></div>
  <div class="sparkle-star" aria-hidden="true"></div>

  <div id="auth-check-loading" class="admin-loading-screen">
    <div class="admin-loading-content">
      <div class="admin-loading-spinner"></div>
      <p>Validando sesion...</p>
    </div>
  </div>

  <div id="protected-content" style="display:none;">
    <header class="header-container" role="banner"></header>

    <main class="admin-main" role="main">
      <div class="admin-container">
        <div class="admin-card">
          <div class="admin-card__header admin-card__header--row">
            <div>
              <h1 class="admin-card__title">Registrar Venta</h1>
              <p class="admin-card__subtitle">Panel para vendedores</p>
            </div>
            <a href="#" id="logout-btn" class="admin-card__logout">Cerrar sesion</a>
          </div>

          <form class="admin-form" id="register-sale-form" aria-label="Formulario de registro de venta">
            <div class="admin-form__group">
              <label for="raffle-select" class="admin-form__label">Seleccionar rifa</label>
              <select id="raffle-select" name="raffleId" class="admin-form__select" required>
                <option value="">Cargando rifas...</option>
              </select>
              <div id="raffle-info" class="admin-form__info" style="display:none;"></div>
            </div>

            <div class="admin-form__section">
              <h3 class="admin-form__section-title">Datos del cliente</h3>

              <div class="admin-form__group">
                <label for="customer-name" class="admin-form__label">Nombre completo</label>
                <input type="text" id="customer-name" name="name" class="admin-form__input" required>
              </div>

              <div class="admin-form__group">
                <label for="customer-email" class="admin-form__label">Correo electronico</label>
                <input type="email" id="customer-email" name="email" class="admin-form__input" required>
              </div>

              <div class="admin-form__group">
                <label for="customer-phone" class="admin-form__label">WhatsApp</label>
                <input type="tel" id="customer-phone" name="phone" class="admin-form__input" required>
              </div>
            </div>

            <div class="admin-form__section">
              <h3 class="admin-form__section-title">Boleta</h3>

              <div class="admin-form__group">
                <label for="ticket-number" class="admin-form__label">Numero elegido</label>
                <input type="text" id="ticket-number" name="ticketNumber" class="admin-form__input" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" placeholder="Ej: 0000" required>
                <p class="admin-form__help">Formato de 4 digitos, de 0000 a 9999.</p>
              </div>

              <div id="ticket-status" class="admin-form__ticket-status"></div>
            </div>

            <div class="admin-form__section">
              <h3 class="admin-form__section-title">Pago</h3>

              <div class="admin-form__group">
                <label class="admin-form__label">Precio</label>
                <div class="admin-form__price-display">
                  <span class="admin-form__price-amount">$40,000</span>
                  <span class="admin-form__price-currency">COP</span>
                </div>
              </div>

              <div class="admin-form__group">
                <label for="payment-method" class="admin-form__label">Metodo de pago</label>
                <select id="payment-method" name="paymentMethod" class="admin-form__select">
                  <option value="WhatsApp">WhatsApp</option>
                  <option value="Nequi">Nequi</option>
                  <option value="Daviplata">Daviplata</option>
                  <option value="Bancolombia">Bancolombia</option>
                  <option value="Efectivo">Efectivo</option>
                </select>
              </div>
            </div>

            <div id="form-error" class="admin-form__error" role="alert" aria-live="polite"></div>

            <button type="submit" class="admin-form__submit" id="submit-btn">
              <span class="admin-form__submit-text">Registrar venta</span>
              <span class="admin-form__submit-loader" aria-hidden="true"></span>
            </button>
          </form>

          <div id="sale-result" class="admin-form__result" style="display:none;"></div>
        </div>
      </div>
    </main>
  </div>

  <script src="../../js/admin/auth-check.js" type="module"></script>
  <script src="../../js/seller/register-sale.js" type="module"></script>
</body>

</html>
